<!DOCTYPE html>
<html lang="en">
  <%- include('partials/head.ejs') %>
  <body>
    <!-- INICIO HEADER-->
    <%- include('partials/headeradmin.ejs') %>
    <!-- FIN HEADER-->

    <!--INICIO MAIN-->
    <main class="main-admin container">
      <section class="admin">
        <div class="admin-buscar">
          <label for="busqueda">
            <picture>
              <img src="/assets/icons/search_icon.svg" alt="lupa para buscar" />
            </picture>
          </label>
          <input
            class="text-filters"
            type="text"
            name="busqueda"
            id="busqueda"
            placeholder="Item o categoria"
          />
        </div>
        <div class="title-agregar">
          <h2>LISTADO DE PRODUCTOS</h2>
          <span>AGREGAR</span>
          <button>
            <a href="/admin/create">
              <iconify-icon icon="ph:plus-fill"></iconify-icon>
            </a>
          </button>
        </div>
        <section>
          <table class="admin-table">
            <thead>
              <tr>
                <th>ID</th>
                <th>Código</th>
                <th>Nombre del Producto</th>
                <th>Categoría</th>
                <th></th>
                <th></th>
              </tr>
            </thead>
            <tbody>
              <% products.forEach(product => { %>
              <tr>
                <td><%= product.product_id %></td>
                <td><%= product.product_sku %></td>
                <td><%= product.product_name %></td>
                <td><%= product.category_name %></td>
                <td>
                  <a
                    href="/admin/update/<%= product.product_id %>"
                    aria-label="Editar producto"
                  >
                    <button>
                      <img
                        src="/assets/icons/edit_pencil.svg"
                        alt="icono de lapicera para editar"
                      />
                    </button>
                  </a>
                </td>
                <td>
                  <form
                    action="/admin/delete/<%= product.product_id %>?_method=DELETE"
                    method="POST"
                  >
                    <button type="submit">
                      <img
                        src="/assets/icons/delete_trash.svg"
                        alt="cesto de basura para eliminar"
                      />
                    </button>
                  </form>
                </td>
              </tr>
              <% }); %>
            </tbody>
          </table>
        </section>
      </section>
    </main>

    <!--FIN MAIN-->

    <!-- INICIO FOOTER-->
    <%- include('partials/footer.ejs') %>

    <!-- FIN FOOTER-->
    <script src="https://cdn.jsdelivr.net/npm/iconify-icon@1.0.8/dist/iconify-icon.min.js"></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-HwwvtgBNo3bZJJLYd8oVXjrBZt8cqVSpeBNS5n7C8IVInixGAoxmnlMuBnhbgrkm"
      crossorigin="anonymous"
    ></script>
    <script src="../js/item.js"></script>
  </body>
</html>
